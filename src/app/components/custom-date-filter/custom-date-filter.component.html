<div class="custom-date-filter">
  <div class="filter-content">
    <!-- Date Range Display Header (for date-range mode) -->
    <div class="range-display" *ngIf="filterType === 'date-range'">
      <div class="range-info">
        <span class="range-label" [class.active]="rangeSelectionStep === 'start'">From:</span>
        <span class="range-value">{{ tempSelectedStartDate ? formatDisplayDate(tempSelectedStartDate) : 'Select start' }}</span>
      </div>
      <span class="range-arrow">→</span>
      <div class="range-info">
        <span class="range-label" [class.active]="rangeSelectionStep === 'end'">To:</span>
        <span class="range-value">{{ tempSelectedEndDate ? formatDisplayDate(tempSelectedEndDate) : 'Select end' }}</span>
      </div>
    </div>

    <!-- Custom Inline Calendar -->
    <div class="calendar-wrapper">
      <!-- Calendar Header -->
      <div class="calendar-header">
        <button class="nav-btn" (click)="previousMonth()" type="button">‹</button>
        <div class="header-dropdowns">
          <select [ngModel]="currentMonth.getMonth()" (change)="onMonthChange($event)" class="month-select">
            <option *ngFor="let month of availableMonths" [value]="month.value">{{ month.label }}</option>
          </select>
          <select [ngModel]="currentMonth.getFullYear()" (change)="onYearChange($event)" class="year-select">
            <option *ngFor="let year of availableYears" [value]="year">{{ year }}</option>
          </select>
        </div>
        <button class="nav-btn" (click)="nextMonth()" type="button">›</button>
      </div>

      <!-- Weekday Headers -->
      <div class="calendar-weekdays">
        <div class="weekday" *ngFor="let day of weekDays">{{ day }}</div>
      </div>

      <!-- Calendar Days Grid -->
      <div class="calendar-days">
        <div *ngFor="let day of calendarDays" 
             class="day-cell"
             [class.other-month]="!day.isCurrentMonth"
             [class.selected]="isSelectedDay(day)"
             [class.today]="isToday(day)"
             [class.disabled]="isDateDisabled(day)"
             [class.in-range]="isInRange(day)"
             [class.range-start]="isRangeStart(day)"
             [class.range-end]="isRangeEnd(day)"
             (click)="selectDay(day)">
          {{ day.day }}
        </div>
      </div>
    </div>

    <!-- Time Selection Section -->
    <div class="time-selection">
      <label class="section-label">Select time</label>
      <div class="time-inputs">
        <select class="time-select" [(ngModel)]="tempTimeFrom">
          <option value="">From</option>
          <option *ngFor="let time of timeOptions" [value]="time">{{ time }}</option>
        </select>
        <select class="time-select" [(ngModel)]="tempTimeTo">
          <option value="">To</option>
          <option *ngFor="let time of timeOptions" [value]="time">{{ time }}</option>
        </select>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="cancel-btn" (click)="onCancel()" type="button">
        CANCEL
      </button>
      <button class="ok-btn" (click)="onApply()" type="button">
        OK
      </button>
    </div>
  </div>
</div>
